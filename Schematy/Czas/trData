

USE Stacja_Paliw

GO

IF OBJECT_ID('Czas.trData') IS NOT NULL
DROP TRIGGER Czas.trData;

GO

CREATE TRIGGER Czas.trData ON Czas.Kalendarz AFTER UPDATE, INSERT 

AS

IF EXISTS (SELECT Data, COUNT(ID) FROM Czas.Kalendarz GROUP BY Data  HAVING COUNT(ID)>1 )
BEGIN
PRINT 'Kazd data moze wystepowac tylko raz w tabeli kalendarz.';
ROLLBACK TRANSACTION 
END

/* trigger blokujacy wstawienie duplikatu daty do tabeli kalendarz */

